TCP流量控制、拥塞控制


什么是流量控制？流量控制的目的？，控制发送者的发送速度，目的是防止分组丢失  
如何实现流量控制？滑动窗口协议（连续ARQ协议）实现  
流量控制引发的死锁？怎么避免死锁的发生？网络原因重置窗口应答丢失，TCP使用了持续计时器  
拥塞控制和流量控制的区别  
拥塞控制的算法   




什么是流量控制？流量控制的目的？  
  
如果发送者发送数据过快，接收者来不及接收，那么就会有分组丢失。为了避免分组丢失，控制发送者的发送速度，使得接收者来得及接收，这就是流量控制。  
流量控制根本目的是防止分组丢失，它是构成TCP可靠性的一方面。  
  
  
如何实现流量控制？  
  
由滑动窗口协议（连续ARQ协议）实现。滑动窗口协议既保证了分组无差错、有序接收，也实现了流量控制。  
主要的方式就是接收方返回的 ACK 中会包含自己的接收窗口的大小，并且利用大小来控制发送方的数据发送。  
  
  
流量控制引发的死锁？怎么避免死锁的发生？  
  
当发送者收到了一个窗口为0的应答，发送者便停止发送，等待接收者的下一个应答。  
但是如果这个窗口不为0的应答在传输过程丢失，发送者一直等待下去，而接收者以为发送者已经收到该应答，等待接收新数据，这样双方就相互等待，从而产生死锁。  
为了避免流量控制引发的死锁，TCP使用了持续计时器。每当发送者收到一个零窗口的应答后就启动该计时器。时间一到便主动发送报文询问接收者的窗口大小。若接收者仍然返回零窗口，则重置该计时器继续等待；若窗口不为0，则表示应答报文丢失了，此时重置发送窗口后开始发送，这样就避免了死锁的产生。  
  
  
拥塞控制和流量控制的区别  
  
拥塞控制：拥塞控制是作用于网络的，它是防止过多的数据注入到网络中，避免出现网络负载过大的情况；常用的方法就是：（ 1 ）慢开始、拥塞避免（ 2 ）快重传、快恢复。  
  
流量控制：流量控制是作用于接收者的，它是控制发送者的发送速度从而使接收者来得及接收，防止分组丢失的。  
  
  
  
拥塞控制的算法  
我们在开始假定：1、数据是单方向传递，另一个窗口只发送确认；2、接收方的缓存足够大，因此发送方的大小的大小由网络的拥塞程度来决定。  
  
（一）慢开始算法：  
（二）拥塞避免算法：  
（三）快重传算法：  
（四）快恢复算法：  




参考  
https://zhuanlan.zhihu.com/p/37379780  
https://www.zhihu.com/question/38749788  
https://blog.csdn.net/ailunlee/article/details/53716367  
https://shiningdan.github.io/2017/03/15/TCP-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/  
http://www.spring4all.com/article/16512  
  
  
